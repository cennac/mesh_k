<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<meta id="i18n_pagename" content="index-common">
		<meta name="keywords" content=""/>
		<link rel="stylesheet" type="text/css" href="css/libs/font-awesome.css"/>
		<link rel="stylesheet" href="css/base.css"/>
		<link rel="stylesheet" href="css/main.css" />
		<script src="js/jquery.js"></script>
		<script src="js/jquery.cookie.js"></script>
	    <!-- 加载语言包文件 -->
	    <script src="js/jquery.i18n.properties.js"></script>
	    <script src="js/language.js"></script>
		<style>
			body{
				margin: 0;
				padding: 0;
				background: url(img/login_bg.png) center no-repeat fixed;
				background-size: cover;
			}
		</style>
	</head>
	
	<body>
		<div class="loginmain">
			<div class="content">
				<form action="/boafrm/formLogin" method="post" name="loginForm" id="loginForm">
				<div class="login_logo"><img src="img/KSLINK.png"/></div>
				<div class="login_ingroup">
					<div class="name_input"><i class="fa fa-user fa-2x"></i><input type="text" id="username" class="i18n-input" selectname="user_name" name="username" value="" onkeyup="login_lengthInfo()"/></div>
					<!--<div class="tips_div">初始账号为Wi-Fi名称</div>-->
					<div class="name_input"><i class="fa fa-lock fa-2x"></i><input type="password" id="password" class="i18n-input" selectname="user_password" name="password" value="" onkeyup="login_lengthInfo()"/></div>
					<!--<div class="tips_div">初始账号与Wi-Fi密码相同</div>-->
					<div class="name_input comfirm"><input type="button" class="i18n-input" selectname="user_submit" id="Login_lg" name="save_apply" onclick="loginInfo()"/></div>
				</div>
				<div class="code">
					<div><span class="i18n" name="login_downLoad"></span></div>
					<img src="img/pic.png"/>
				</div>
				<!--<input type="hidden" value="/status.htm" name="submit-url">-->
				</form>
			</div>
		</div>
		
		<script>
			$(function(){
			    $("input[name='username']").focus();
			});
			$("#username").click(function(){
		   		$(this).val("");
		   	})
		   	$("#password").click(function(){
		   		$(this).val("");
		   	})
			 function getValue(id) { 
			 	return document.getElementById(id).value; 		        
		   }  	
		   	function login_lengthInfo() {
		   		//var pwdblank = /\/g;
			    if(getValue("username").length>30){
			    	alert("账号长度超过30");
			    	return false;
			    }
			    if(getValue("password").length>30){
			    	alert("密码长度超过30");
			    	return false;
			    }
			    if(getValue("username").match(/^ +| +$/g)){
			    	alert("不能包含空格！");
			    	//this.value=this.value.replace(/^ +| +$/g,'')
			    }
			    if(getValue("password").match(/^ +| +$/g)){
			    	alert("不能包含空格！");
			    }
			}
		   	function getEncryption() {
		   		 var str=getValue("username");
		   		 var str2=getValue("password");
				 var base = new Base64();  
			     var result = base.encode(str); //加密			     
			     var result2 = base.encode(str2); //加密
//			     var result3 = base.decode(result1);//解密
//			     var result4 = base.decode(result2);//解密
			     console.log(result)
				 $("#username").val(result);
				 $("#password").val(result2);
			} 
		   	function loginInfo(){	
		   		
		      if(getValue("username")=="" || getValue("password")==""){
		          alert("用户名或密码为空，请输入");
		         $("#username").focus();
		    }else{
		    	
		    	getEncryption();
				document.loginForm.submit();
		 		}
			}
		   	
			//加密、解密算法封装：
			
			function Base64() {  
			
			    // private property  
			    _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";  
			
			    // public method for encoding  
			    this.encode = function (input) {  
			        var output = "";  
			        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;  
			        var i = 0;  
			        input = _utf8_encode(input);  
			        while (i < input.length) {  
			            chr1 = input.charCodeAt(i++);  
			            chr2 = input.charCodeAt(i++);  
			            chr3 = input.charCodeAt(i++);  
			            enc1 = chr1 >> 2;  
			            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);  
			            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);  
			            enc4 = chr3 & 63;  
			            if (isNaN(chr2)) {  
			                enc3 = enc4 = 64;  
			            } else if (isNaN(chr3)) {  
			                enc4 = 64;  
			            }  
			            output = output +  
			            _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +  
			            _keyStr.charAt(enc3) + _keyStr.charAt(enc4);  
			        }  
			        return output;  
			    }  
			
			    // public method for decoding  
			    this.decode = function (input) {  
			        var output = "";  
			        var chr1, chr2, chr3;  
			        var enc1, enc2, enc3, enc4;  
			        var i = 0;  
			        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");  
			        while (i < input.length) {  
			            enc1 = _keyStr.indexOf(input.charAt(i++));  
			            enc2 = _keyStr.indexOf(input.charAt(i++));  
			            enc3 = _keyStr.indexOf(input.charAt(i++));  
			            enc4 = _keyStr.indexOf(input.charAt(i++));  
			            chr1 = (enc1 << 2) | (enc2 >> 4);  
			            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);  
			            chr3 = ((enc3 & 3) << 6) | enc4;  
			            output = output + String.fromCharCode(chr1);  
			            if (enc3 != 64) {  
			                output = output + String.fromCharCode(chr2);  
			            }  
			            if (enc4 != 64) {  
			                output = output + String.fromCharCode(chr3);  
			            }  
			        }  
			        output = _utf8_decode(output);  
			        return output;  
			    }  
			
			    // private method for UTF-8 encoding  
			    _utf8_encode = function (string) {  
			        string = string.replace(/\r\n/g,"\n");  
			        var utftext = "";  
			        for (var n = 0; n < string.length; n++) {  
			            var c = string.charCodeAt(n);  
			            if (c < 128) {  
			                utftext += String.fromCharCode(c);  
			            } else if((c > 127) && (c < 2048)) {  
			                utftext += String.fromCharCode((c >> 6) | 192);  
			                utftext += String.fromCharCode((c & 63) | 128);  
			            } else {  
			                utftext += String.fromCharCode((c >> 12) | 224);  
			                utftext += String.fromCharCode(((c >> 6) & 63) | 128);  
			                utftext += String.fromCharCode((c & 63) | 128);  
			            }  
			
			        }  
			        return utftext;  
			    }  
			
			    // private method for UTF-8 decoding  
			    _utf8_decode = function (utftext) {  
			        var string = "";  
			        var i = 0;  
			        var c = c1 = c2 = 0;  
			        while ( i < utftext.length ) {  
			            c = utftext.charCodeAt(i);  
			            if (c < 128) {  
			                string += String.fromCharCode(c);  
			                i++;  
			            } else if((c > 191) && (c < 224)) {  
			                c2 = utftext.charCodeAt(i+1);  
			                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));  
			                i += 2;  
			            } else {  
			                c2 = utftext.charCodeAt(i+1);  
			                c3 = utftext.charCodeAt(i+2);  
			                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));  
			                i += 3;  
			            }  
			        }  
			        return string;  
			    }  
			}
		</script>
	</body>
</html>
