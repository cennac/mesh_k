<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<meta id="i18n_pagename" content="index-common">
	    <meta name="keywords" content=""/>
	    <meta name="description" content=""/>
	    <meta http-equiv="Access-Control-Allow-Origin" content="*">
		<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/libs/font-awesome.css"/>	
		<link href="css/bootstrap-switch.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/bootstrap-table.css" />
		<link rel="stylesheet" type="text/css" href="css/base.css"/>
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/bootstrap/bootstrap-datetimepicker.min.css" />
		<link type="image/x-icon" href="favicon.png" rel="shortcut icon"/>
	</head>
	<body>
		<div class="guest_net_parent">
			<div class="form-group" style="margin-bottom: 10px;">
				<div class="intell guest_mode i18n" name="Control_parennt"></div>
				<div class="switch_check">
					<input type="checkbox" class="checkbox_switch" data-size="mini" name="status" />
				</div>
			</div>
			
			
			
			<button id="mymodelSelect" class="btn btn-primary" data-toggle="modal" data-target="#myModal" style="margin: 15px 0;display: none;outline: none;"><i class="fa fa-plus-square fa-lg"></i><span class="i18n" name="add_item" style="margin-left: 5px;"></span></button>
			<!-- 模态框（Modal） -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<form action="/boafrm/formParentContrl" method="POST" name="formParentContrlAdd">
			    <div class="modal-dialog">
			        <div class="modal-content">
			            <div class="modal-header">
			                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			                <h4 class="modal-title" id="myModalLabel">选择终端</h4>
			            </div>
			            <div class="modal-body">
			            	<div class="weekSelect">
			            		<span class="tips_parent">星期选择</span>
			            		<ul>			
			            			<li><a href="#"><input type="checkbox" name="Mon" value="1" ONCLICK=week()>星期一</a></li>
			            			<li><a href="#"><input type="checkbox" name="Tues" value="1" ONCLICK=week()>星期二</a></li>
			            			<li><a href="#"><input type="checkbox" name="Wed" value="1" ONCLICK=week()>星期三</a></li>
			            			<li><a href="#"><input type="checkbox" name="Thur" value="1" ONCLICK=week()>星期四</a></li>
			            			<li><a href="#"><input type="checkbox" name="Fri" value="1" ONCLICK=week()>星期五</a></li>
			            			<li><a href="#"><input type="checkbox" name="Sat" value="1" ONCLICK=week()>星期六</a></li>
			            			<li><a href="#"><input type="checkbox" name="Sun" value="1" ONCLICK=week()>星期天</a></li>			            			
			            		</ul>
			            	</div>
			            	<div class="timeSelect">
			            		<span class="tips_parent">时间选择</span>
			            		<ul>
			            			<li><a href="#">
			            				<div class="startTime"><label>开始时间</label><input type="text" id='stime'></div>
			            				<div class="endTime"><label>结束时间</label><input type="text" id='etime'></div>
			            				<input type="hidden" name="parent_start_time" />
			            				<input type="hidden" name="parent_end_time" />
			            			</a></li>			            			
			            		</ul>
			            	</div>
			            	<div class="terminalSelect">
			            		<table border="0" width="500">
								  <tr><b style="font-size: 16px;">终端列表</b></tr>
								  <% parentContrlTerminalList(); %>
								 </table>
			            	</div>
			            </div>
			            <div class="modal-footer">
			                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			                <button type="submit" class="btn btn-primary" value="Save" name="addParentContrl" class="i18n" onclick="return submitClick()">提交更改</button>
			            </div>
			        </div><!-- /.modal-content -->
			    </div><!-- /.modal -->
			    <input type="hidden" value="/parentControl.html" name="submit-url">
			    </form>
			    
			</div>
			
			<div class="panel panel-default" style="display: none;"> 
				<div class="panel-body table-responsive"> 　　　　　　　　 
			    	<table class="table table-striped table-bordered table-hover" id="tableL01"> </table> 
			    </div> 
			</div>
			<!--<div>
				<form action="/boafrm/formParentContrl" method="POST" name="formParentContrlDel">
					<table border="0" width="500">
						<tr><font size=2><b><script>dw(macfilter_current_table)</script></b></font></tr>
				  		<% parentContrlList(); %>
				  	</table>
					<input type="submit" value="Delete Selected" name="deleteSelParentContrl" onClick="return deleteClick()"  class="i18n">
					<input type="hidden" value="/parentControl.htm" name="submit-url"> 
				</form>
			</div>-->
			
		</div>
		<script src="js/jquery.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/bootstrap-switch.min.js"></script>
		<script src="js/bootstrap-table.js"></script>
		<script src="js/bootstrap-datetimepicker.js"></script>
		<script src="js/jquery.cookie.js"></script>
	    <!-- 加载语言包文件 -->
	    <script src="js/jquery.i18n.properties.js"></script>
	    <script src="js/language.js"></script>
	    
		<script>
			$(document).ready(function(){
				
				//开关按钮
				$('[name="status"]').bootstrapSwitch({
					onText: "",
					offText: "",
					onColor: "success",
					offColor: "info",
					size: "small",
					onSwitchChange: function(event, state) {
						if (state == true) {
							$(".panel-default,#mymodelSelect").css("display","block");
						} else {
							$(".panel-default,#mymodelSelect").css("display","none");
						}
					}	
				});
				//表格
				var tableColumns = [
//              {field: 'useit', title: '是否启用', sortable: false,checkbox: true,formatter:function(cellvalue, options, rowdata){
//              	if (rowdata.useit == true)
//				        return {
//				            disabled : true,//设置是否可用
//				            checked : true//设置选中
//				        };
//				    return false;
//              }},
                {field: 'name', title: '设备名称', sortable: false},
                {field: 'macaddr', title: 'MAC地址', sortable: false},
                {field: 'time', title: '上网时长', sortable: false},
                {field: 'startT', title: '起始时间', sortable: false},
                {field: 'endI', title: '结束时间', sortable: false},
                {field:"usid",title:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;操作&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",sortable:false,formatter:function(cellvalue, options, rowdata){
		        	  var html='<div><a href="#" class="table-link" style="margin-right:10px" title="编辑" onclick="editForm(\''+cellvalue+'\')"><i class="fa fa-edit"></i> 编辑</a>';
		        	  html+='<a href="#" class="table-link" title="删除" onclick="accountConfig(\''+cellvalue+'\')" ><i class="fa fa-trash-o"></i> 删除</a></div>';
	        		  return html;
		          }}
            ];
            var data1=[
                {name:"小米8",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"iPhoneX",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"红米Note",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"三星",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"小米",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"小米8",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"小米8",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"小米8",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
                {name:"小米8",macaddr:"6d:22:89:F7:80",time:"1:00:23",startT:"2019-02-03 23:45:12",endI:"2019-02-04 23:45:12",usid:"操作"},
            ];
            $('#tableL01').bootstrapTable('destroy');   //动态加载表格之前，先销毁表格

            $('#tableL01').bootstrapTable({//表格初始化
                columns: tableColumns,  //表头
                data:data1, //通过ajax返回的数据
                width:350,
//              height:268,
                method: 'get',
                pageSize: 200,
                pageNumber: 1,
                pageList: [],
                cache: false,
//              striped: true,
//              pagination: true,
//              sidePagination: 'client',
                search: false,
//              showRefresh: true,
//              showExport: false,
//              showFooter: true,
                // exportTypes: ['csv', 'txt', 'xml'],
//              clickToSelect: true,
            });
//          var top_height=$(".header").height();
//			var bottom_height=$(".footer-wrap_home").height();
//          var table_height=$(".main_content")-top_height-bottom_height;	;
//          $( '#tableL01' ).bootstrapTable('resetView',{ height: table_height+10 } );
            $('#stime').datetimepicker({
		    	 language: 'zh-CN',
				 format: 'hh:ii',
				 weekStart: 0,
				 todayBtn:  false,
			     autoclose: 1,
			     todayHighlight: 1,
				 startView: 2,
				 minView: 0,
				 forceParse: 2
		    });
		    $('#etime').datetimepicker({
		    	 language: 'zh-CN',
				 format: 'hh:ii',
				 weekStart: 0,
				 todayBtn:  false,
			     autoclose: 1,
			     todayHighlight: 1,
				 startView: 2,
				 minView: 0,
				 forceParse: 2
		    });
	    
		})		
		function submitClick(){
			var parent_start_time_value=$("#stime").val();
			var parent_end_time_value=$("#etime").val();
			if(parent_start_time_value==""||parent_end_time_value==""){
				alert("请选择开始时间或结束时间");
			}else{
				var parent_start_time_value_split=parent_start_time_value.split(":");
				var parent_end_time_value_split=parent_end_time_value.split(":");
				var start_1=parseInt(parent_start_time_value_split[0])*60+parseInt(parent_start_time_value_split[1]);
				var end_1=parseInt(parent_end_time_value_split[0])*60+parseInt(parent_end_time_value_split[1]);
				if(start_1>=end_1){
					alert("结束时间不能小于或等于开始时间！");
				}else{
					document.formParentContrlAdd.parent_start_time.value=start_1;
					document.formParentContrlAdd.parent_end_time.value=end_1;
				}
			}
			return true;
		}
		function deleteClick()
		{
		  if ( !confirm("确认删除？") ) {
			return false;
		  }
		  else
			return true;
		}
		</script>
	</body>
</html>
