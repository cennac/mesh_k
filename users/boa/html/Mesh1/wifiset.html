<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<% getIndex("no-cache"); %>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<meta id="i18n_pagename" content="index-common">
	    <meta name="keywords" content=""/>
	    <meta name="description" content=""/>
	    <meta http-equiv="Access-Control-Allow-Origin" content="*">
		<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/libs/font-awesome.css"/>	
		<link rel="stylesheet" href="css/bootstrap-switch.min.css" />
		<!--<link rel="stylesheet" type="text/css" href="css/compiled/theme_styles.css"/>-->
		<link rel="stylesheet" type="text/css" href="css/base.css"/>
		<link rel="stylesheet" href="css/main.css" />
		<link type="image/x-icon" href="favicon.png" rel="shortcut icon"/>
		<script type="text/javascript" src="js/util_gw.js"> </script>
		<SCRIPT language=Javascript src="<% getInfo("lang");%>"></SCRIPT>
		<SCRIPT>
		var wlan_channel=new Array();
		var regDomain=new Array();
		var defaultChan=new Array();
		var lastBand=new Array();
		var lastRegDomain=new Array();
		var RFType=new Array();
		var APMode=new Array();
		var bandIdx=new Array();
		var bandIdxAP=new Array();
		var bandIdxClient=new Array();
		var startChanIdx=new Array();
		var wlan_idx;
		
		var switch_status='<%getIndex("autoWlanEnabled");%>';
		if(switch_status){
			lastBand[1] = 0;
			lastRegDomain[1]= 0;
			bandIdxAP[1] = -1;
			bandIdxClient[1] = -1;
			startChanIdx[1] = 0;
		}else{
			lastBand[0] = 0;
			lastRegDomain[0]= 0;
			bandIdxAP[0] = -1;
			bandIdxClient[0] = -1;
			startChanIdx[0] = 0;
		}
	

		// <<-------------------------------------- for WPS
		function Data_country(country_code,abb,idx_5g,idx_2g,fullname) 
		{
		        this.country_code= country_code;
		        this.abb = abb;
		        this.idx_5g = idx_5g;
		        this.idx_2g = idx_2g;
		        this.fullname = fullname;
		}
		
		function Data_regdomain(regdomain,channelsetnumber,regdomainarea) 
		{
		        this.regdoemain = regdomain;
		        this.channelsetnumber = channelsetnumber;
		        this.regdomainarea = regdomainarea;
		}
	
		
		
		
		function Set_SSIDbyBand(form, wlan_id, band, index)
		{
			var selectText=form.elements["band"+wlan_id].options[index].text.substr(0,1);
			var bandOption = form.elements["band"+wlan_id].options.value;
				
			if(bandOption == 0 || bandOption == 1 || (bandOption == 7 && selectText=='2') || bandOption == 2 || bandOption == 9 || bandOption == 10)
			{
				var tmpstr=ssid_2g;
				if(ssid_2g.match("&quot;")!=null)
					tmpstr=ssid_2g.replace(/&quot;/g, "\"");
		
				if(ssid_2g.match("&#37;")!=null)
					tmpstr=tmpstr.replace(/&#37;/g, "%");
		
				if(ssid_2g.match("&#38;")!=null)
					tmpstr=tmpstr.replace(/&#38;/g, "&");
		
				if(ssid_2g.match("&#39;")!=null)
					tmpstr=tmpstr.replace(/&#39;/g, "'");
				
				if(ssid_2g.match("&#92;")!=null)
					tmpstr=tmpstr.replace(/&#92;/g, "\\");
		
				if(ssid_2g.match("&#62;")!=null)
					tmpstr=tmpstr.replace(/&#62;/g, ">");
		
				if(ssid_2g.match("&#60;")!=null)
					tmpstr=tmpstr.replace(/&#60;/g, "<");
				
				form.elements["ssid"+wlan_idx].value = tmpstr;
			}
			else if(bandOption == 3 || (bandOption == 7 && selectText=='5') || bandOption == 11 || bandOption == 63 || bandOption == 71 || bandOption == 75)
			{
				//form.elements["ssid"+wlan_idx].value = ssid_5g;
				var tmpstr=ssid_5g;
				if(ssid_5g.match("&quot;")!=null)
					tmpstr=ssid_5g.replace(/&quot;/g, "\"");
		
				if(ssid_2g.match("&#37;")!=null)
					tmpstr=tmpstr.replace(/&#37;/g, "%");
		
				if(ssid_2g.match("&#38;")!=null)
					tmpstr=tmpstr.replace(/&#38;/g, "&");
					
				if(ssid_5g.match("&#39;")!=null)
					tmpstr=tmpstr.replace(/&#39;/g, "'");
				
				if(ssid_5g.match("&#92;")!=null)
					tmpstr=tmpstr.replace(/&#92;/g, "\\");
		
				if(ssid_5g.match("&#62;")!=null)
					tmpstr=tmpstr.replace(/&#62;/g, ">");
		
				if(ssid_5g.match("&#60;")!=null)
					tmpstr=tmpstr.replace(/&#60;/g, "<");
				
				form.elements["ssid"+wlan_idx].value = tmpstr;
			}
		}
		function Set_onChangeBand(form, wlan_id, band, index){							
			updateChan_channebound(form, wlan_id);
		}
		
		function LoadSetting()
		 {		 	
			    if(switch_status){
			    	document.wlanSetup.autoWlanEnabled.checked=false;
			    	state_false();	
					updateChan_channebound(document.wlanSetup, wlan_idx);	
			    }else{			    	
			    	document.wlanSetup.autoWlanEnabled.checked=true;
			    	state_true();		
					updateChan_channebound(document.wlanSetup, wlan_idx);	
			    }		 
	
		}
		
		function resetForm()
		{
			location=location; 
		}
		</SCRIPT>
	</head>
	<body onload="LoadSetting();">
		 		<div class="main_content">
		 			<div class="wifi_content">
			 			<div class="wifiset">
			 				<form role="form" action="/boafrm/formWlanSetupAll" method="POST" name="wlanSetup">
			 				<input type="hidden" name="wps_clear_configure_by_reg<% getIndex("wlan_idx"); %>" value="0">
							<input type="hidden" name="Band2G5GSupport" value="<% getIndex("Band2G5GSupport"); %>">
							<input type="hidden" name="dsf_enable" value="<% getIndex("dsf_enable"); %>">
							<input type="hidden" name="wlBandMode" value="<% getIndex("wlanBand2G5GSelect"); %>">
							<input type="hidden" name="regdomain<% getIndex("wlan_idx");%>" value="<% getIndex("regDomain"); %>">
							<input type="hidden" name="countrystr<% getIndex("wlan_idx");%>" value="<% getInfo("country_str"); %>">
							<input type="hidden" name="wlan_support_8812e" value="<% getIndex("wlan_support_8812e"); %>">
							<input type="hidden" name="wlan_support_8192f" value="<% getIndex("wlan_support_8192f"); %>">
							<input type="hidden" name="wlan_support_ac2g" value="<% getIndex("wlan_support_ac2g"); %>">
			 				<div class="top_wifiset">
			 					<div class="intell i18n" name="24g_5g_change_title_wifi"></div>		 					
				 				<div class="switch_check">
				 					<input type="checkbox" class="checkbox_switch" data-size="mini" name="autoWlanEnabled" value="ON"/>
				 				</div>
						    </div>
						    <div class="wifiset_tips">
						    	<p class="i18n" name="tips_for_wifiset"></p>
						    </div>
			 				<hr />
			 				<div class="content_wifiset">
			 					<div class="leftset">	
			 							<%setWlanIDX ("wlan1");%>
			 							<div class="form-group title_24g"><span>2.4G</span></div>
			 							<div class="form-group" style="display: none;">
			 								<select name="band1" onChange="updateBand(document.wlanSetup, 1);Set_onChangeBand(document.wlanSetup, 1, document.wlanSetup.band1, document.wlanSetup.band1.selectedIndex);Set_SSIDbyBand(document.wlanSetup, 1,document.wlanSetup.band1, document.wlanSetup.band1.selectedIndex)">
										     	<SCRIPT>
													RFType[1]= <% getIndex("RFType"); %>;
													APMode[1]= <% getIndex("wlanMode"); %>;
													var val = <% getIndex("band"); %>;
													if (val > 1)
										    			bandIdx[1]= val - 1;
													else
														bandIdx[1]= val;
													bandIdxAP[1]=bandIdx[1];
													bandIdxClient[1]=bandIdx[1];
													showBand(document.wlanSetup, 1);
										     	</SCRIPT>
										 	</select>
			 							</div>
			 							<div class="form-group"><label class="i18n" name="ssid_wifset"></label><input class="form_input" id="ssid_forwifi" name="ssid1"  value="<% getInfo("ssid"); %>" placeholder=""/></div>
					 					<div class="form-group" style="display: none;">
					 						<select name="channelbound1" onChange="update_controlsideband(document.wlanSetup, 1); showtxrate_updated(document.wlanSetup,document.wlanSetup.band1.options[document.wlanSetup.band1.selectedIndex].value, 1, <% getIndex("rf_used"); %>)">
									     		<option value="0">20MHz</option>
												<option value="1">40MHz</option>
												<option value="2">80MHz</option>
												<option value="3">20/40MHz</option>
												<SCRIPT>
													use_40m = <% getIndex("ChannelBonding"); %>;
													document.wlanSetup.elements["channelbound" + 1].selectedIndex=use_40m;
												</SCRIPT>
										 	</select>
					 					</div>
					 					<div class="form-group" style="display: none;">
					 						<select name="controlsideband1">

	 										</select>
					 					</div>
					 					<div class="form-group chenal_select">
					 						<label class="i18n" name="channel_select_wifiset"></label>
					 						<select  name="chan1" onChange="updateChan_selectedIndex(document.wlanSetup, 1);"> </select>
											    <SCRIPT>
												regDomain[1] = <% getIndex("regDomain"); %>;
												defaultChan[1] = <% getIndex("channel"); %>;
											
												wlan_channel[1] = defaultChan[1];
												updateChan(document.wlanSetup, 1);
											    </SCRIPT>	
					 						<span class="caret" style="position: relative;left: -40px;"></span>
					 					</div>
					 					<div class="form-group">
					 						<label class="i18n" name="encryption_wifiset"></label>
					 						<select name="" class="encryption_one" id="method" name="method1">
					 							<option value="0" class="i18n" name="disable_wifiset"></option>
					 							<option value="4">WPA2-PSK(AES)</option>
					 							<option value="6">WPA-PSK/WPA2-PSK</option>
					 						</select>	
					 						<span class="caret" style="position: relative;left: -40px;"></span>
					 					</div>
					 					<div class="form-group wpa2_aes_24g"><label class="i18n" name="encryption_key1_wifiset"></label><input class="form_input" type="password" name="pskValue<% getIndex("wlan_idx"); %>" id="wpapsk"/></div>
					 					<div class="form-group wpa_mixed_24g"><label class="i18n" name="encryption_key2_wifiset"></label><input class="form_input" type="password" name="wapiPskValue<% getIndex("wlan_idx"); %>" id="wapipsk" /></div>
			 					</div>
			 					<div class="rightset">
			 						<%setWlanIDX ("wlan0");%>
			 							<div class="form-group title_5g"><span>5G</span></div>
			 							<div class="form-group" style="display: none;">
			 								<select name="band0" onChange="updateBand(document.wlanSetup, 0);Set_onChangeBand(document.wlanSetup, 0, document.wlanSetup.band0, document.wlanSetup.band0.selectedIndex);Set_SSIDbyBand(document.wlanSetup, 0,document.wlanSetup.band0, document.wlanSetup.band0.selectedIndex)">
										     	<SCRIPT>
													RFType[0]= <% getIndex("RFType"); %>;
													APMode[0]= <% getIndex("wlanMode"); %>;
													var val = <% getIndex("band"); %>;
													if (val > 0)
										    			bandIdx[0]= val - 1;
													else
														bandIdx[0]= val;
													bandIdxAP[0]=bandIdx[0];
													bandIdxClient[0]=bandIdx[0];
													showBand(document.wlanSetup, 0);
										     	</SCRIPT>
										 	</select>
			 							</div>
			 							<div class="form-group for_5g"><label class="i18n" name="ssid_5g_wifset"></label><input class="form_input" type="text" name="ssid0"  value="<% getInfo("ssid"); %>" placeholder=""/></div>
					 					<div class="form-group" style="display: none;">
					 						<select name="channelbound0" onChange="update_controlsideband(document.wlanSetup, 0); showtxrate_updated(document.wlanSetup,document.wlanSetup.band0.options[document.wlanSetup.band0.selectedIndex].value, 0, <% getIndex("rf_used"); %>)">
									     		<option value="0">20MHz</option>
												<option value="1">40MHz</option>
												<option value="2">80MHz</option>
												<option value="3">20/40MHz</option>
												<SCRIPT>
													use_40m = <% getIndex("ChannelBonding"); %>;
													document.wlanSetup.elements["channelbound" + 0].selectedIndex=use_40m;
												</SCRIPT>
										 	</select>
					 					</div>
					 					<div class="form-group" style="display: none;">
					 						<select name="controlsideband0">

	 										</select>
					 					</div>
					 					<div class="form-group for_5g">
					 						<label class="i18n" name="channel_5g_select_wifiset"></label>
					 						<select  name="chan0" onChange="updateChan_selectedIndex(document.wlanSetup, 0);"> </select>
											    <SCRIPT>
												regDomain[0] = <% getIndex("regDomain"); %>;
												defaultChan[0] = <% getIndex("channel"); %>;
											
												wlan_channel[0] = defaultChan[0];
												updateChan(document.wlanSetup, 0);
											    </SCRIPT>		
					 						<span class="caret" style="position: relative;left: -40px;"></span>
					 					</div>
					 					<div class="form-group for_5g">
					 						<label class="i18n" name="encryption_5g_wifiset"></label>
					 						<select name="" class="encryption_two">
					 							<option value="0" class="i18n" name="disable_wifiset"></option>
					 							<option value="4">WPA2-PSK(AES)</option>
					 							<option value="6">WPA-PSK/WPA2-PSK</option>					 			
					 						</select>	
					 						<span class="caret" style="position: relative;left: -40px;"></span>
					 					</div>
					 					<div class="form-group wpa2_aes_5g"><label class="i18n" name="encryption_5g_key1_wifiset"></label><input class="form_input" type="password" name=""/></div>
					 					<div class="form-group wpa_mixed_5g"><label class="i18n" name="encryption_5g_key2_wifiset"></label><input class="form_input" type="password" name=""/></div>
			 					</div>			 					
			 				</div>
			 				<div class="form-group form-group-btn">
			 					<% getInfo("apply_direct_comment_start");%>
			 					<button type="submit" value="Save & Apply" class="i18n" name="save_apply" onClick="return saveChanges_basic(document.wlanSetup, wlan_idx)"></button>
			 					<% getInfo("apply_direct_comment_end");%>
			 				</div>
			 			</form>
			 			</div>
		 			</div>
		 		</div>
		
		<script src="js/jquery.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/bootstrap-switch.min.js"></script>
		<!--<script src="js/jquery-1.9.1.min.js"></script>-->
	    <script src="js/jquery.cookie.js"></script>
	    <!-- 加载语言包文件 -->
	    <script src="js/jquery.i18n.properties.js"></script>
	    <script src="js/language.js"></script>
		<script type="text/javascript">
    	$(document).ready(function(){
        	$('.checkbox_switch').bootstrapSwitch({  //开关按钮
		        onText:"",  
		        offText:"",  
		        onColor:"success",  
		        offColor:"info",  
		        size : "mini",    // 设置控件大小,从小到大  (mini/small/normal/large)  
		        onSwitchChange:function(event,state){  
		            if(state==true){  
		               state_true();
		            }else{  		                
		               state_false(); 
		           }  
		      	}  
			})
			
			
        	$(".encryption_one").change(function(){
					var changevalue=$(this).val();
					if(changevalue==0){
						$(".wpa2_aes_24g,.wpa_mixed_24g,.wep_24g").css("display","none");
					}
					if(changevalue==4){
						$(".wpa_mixed_24g,.wep_24g").css("display","none");
						$(".wpa2_aes_24g").css("display","block");
					}
					if(changevalue==6){
						$(".wep_24g,.wpa2_aes_24g").css("display","none");
						$(".wpa_mixed_24g").css("display","block");
					}
				})
        	$(".encryption_two").change(function(){
					var changevalue=$(this).val()
					if(changevalue==0){
						$(".wpa2_aes_5g,.wep_5g,.wpa_mixed_5g").css("display","none");
					}
					if(changevalue==4){
						$(".wpa_mixed_5g,.wep_5g").css("display","none");
						$(".wpa2_aes_5g").css("display","block");
					}
					if(changevalue==6){
						$(".wep_5g,.wpa2_aes_5g").css("display","none");
						$(".wpa_mixed_5g").css("display","block");
					}
				})
	    	})
	    	
    		function state_true(){//state为true时页面的状态
				$(".title_24g,.title_5g,.for_5g,.wep_5g,.band_24g,.chenal_select").css("display","none");  
		        $(".wifiset_tips").css("display","block");		                
		        $(".leftset").css("float","none");
		        $(".leftset").css("margin-left","auto");
		        $(".leftset").css("margin-right","auto");
			}
			function state_false(){//state为false时页面的状态
				$(".title_24g,.title_5g,.for_5g,.chenal_select,.band_24g").css("display","block");  
		        $(".wifiset_tips").css("display","none"); 
		        $(".leftset").css("float","left");
		        $(".leftset").css("margin-left","none");
		        $(".leftset").css("margin-right","none");
			}
			
    	</script>
    	
	</body>
</html>
